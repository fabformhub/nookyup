<div class="max-w-4xl mx-auto py-16 px-6">

  <!-- Header -->
  <div class="flex justify-between items-start gap-6 mb-10">
    <div>
      <h1 class="text-4xl font-semibold mb-2 tracking-tight text-pink-300">
        <%= ad.title %>
      </h1>

      <p class="text-sm text-slate-400">
        <%= ad.city_name %> · <%= ad.category_name %>
        <% if (ad.subcategory_name) { %> / <%= ad.subcategory_name %> <% } %>
        · by <span class="text-pink-300"><%= ad.username %></span>
      </p>

      <p class="text-xs text-slate-500 mt-1">
        Created: <%= ad.created_at %>
        <% if (ad.updated_at) { %> · Updated: <%= ad.updated_at %> <% } %>
      </p>
    </div>

    <!-- Status Badge -->
    <span 
      class="
        text-xs uppercase tracking-wide px-3 py-1 rounded-full border
        <% if (ad.status === 'approved') { %> bg-green-900/40 text-green-300 border-green-700 <% } %>
        <% if (ad.status === 'draft') { %> bg-slate-800/60 text-slate-300 border-slate-700 <% } %>
        <% if (ad.status === 'pending') { %> bg-yellow-900/40 text-yellow-300 border-yellow-700 <% } %>
        <% if (ad.status === 'archived') { %> bg-slate-700/40 text-slate-300 border-slate-600 <% } %>
      "
    >
      <%= ad.status %>
    </span>
  </div>

  <!-- Body -->
  <div 
    class="
      nookyup-hover
      mb-10 p-6 rounded-2xl
      bg-slate-900/40 border border-slate-800/60 backdrop-blur-xl
      text-slate-200 whitespace-pre-line text-lg leading-relaxed

      transition-all duration-500
      hover:scale-[1.01]
      hover:border-pink-500/70
      hover:shadow-[0_0_35px_rgba(236,72,153,0.5)]
    "
  >
    <%= ad.body %>
  </div>

  <!-- Flags -->
  <% if (ad.flag_reason || (ad.flags && ad.flags.length)) { %>
    <div 
      class="
        nookyup-hover
        mb-10 p-6 rounded-2xl
        bg-red-900/20 border border-red-700/40 backdrop-blur-xl
        text-red-300 space-y-3

        transition-all duration-500
        hover:scale-[1.01]
        hover:border-red-500/70
        hover:shadow-[0_0_35px_rgba(239,68,68,0.5)]
      "
    >
      <h2 class="text-sm font-semibold tracking-wide text-red-300">Flags</h2>

      <% if (ad.flag_reason) { %>
        <p class="text-sm">Latest: <%= ad.flag_reason %></p>
      <% } %>

      <% if (ad.flags && ad.flags.length) { %>
        <ul class="text-xs list-disc pl-5 space-y-1">
          <% ad.flags.forEach(f => { %>
            <li><%= f.reason %> — <%= f.created_at %></li>
          <% }) %>
        </ul>
      <% } %>
    </div>
  <% } %>

  <!-- Actions -->
  <div class="flex flex-wrap gap-4">

    <% if (ad.status === 'pending') { %>
      <!-- Approve -->
      <form method="POST" action="/admin/ad/<%= ad.id %>/approve">
        <button
          type="submit"
          class="
            nookyup-hover
            px-4 py-2 rounded-lg text-sm font-medium
            text-green-300 border border-green-600/40
            bg-slate-900/40 backdrop-blur-xl
            transition-all duration-500
            hover:scale-[1.05]
            hover:border-green-500/80
            hover:text-green-200
            hover:shadow-[0_0_25px_rgba(34,197,94,0.4)]
          "
        >
          Approve
        </button>
      </form>

      <!-- Reject -->
      <form method="POST" action="/admin/ad/<%= ad.id %>/reject">
        <button
          type="submit"
          class="
            nookyup-hover
            px-4 py-2 rounded-lg text-sm font-medium
            text-red-300 border border-red-600/40
            bg-slate-900/40 backdrop-blur-xl
            transition-all duration-500
            hover:scale-[1.05]
            hover:border-red-500/80
            hover:text-red-200
            hover:shadow-[0_0_25px_rgba(239,68,68,0.4)]
          "
        >
          Reject
        </button>
      </form>
    <% } %>

    <% if (ad.status === 'approved') { %>
      <!-- Archive -->
      <form method="POST" action="/admin/ad/<%= ad.id %>/archive">
        <button
          type="submit"
          class="
            nookyup-hover
            px-4 py-2 rounded-lg text-sm font-medium
            text-yellow-300 border border-yellow-600/40
            bg-slate-900/40 backdrop-blur-xl
            transition-all duration-500
            hover:scale-[1.05]
            hover:border-yellow-500/80
            hover:text-yellow-200
            hover:shadow-[0_0_25px_rgba(234,179,8,0.4)]
          "
        >
          Archive
        </button>
      </form>
    <% } %>

    <% if (ad.status === 'archived') { %>
      <!-- Restore -->
      <form method="POST" action="/admin/ad/<%= ad.id %>/restore">
        <button
          type="submit"
          class="
            nookyup-hover
            px-4 py-2 rounded-lg text-sm font-medium
            text-pink-300 border border-pink-600/40
            bg-slate-900/40 backdrop-blur-xl
            transition-all duration-500
            hover:scale-[1.05]
            hover:border-pink-500/80
            hover:text-pink-200
            hover:shadow-[0_0_25px_rgba(236,72,153,0.4)]
          "
        >
          Restore
        </button>
      </form>
    <% } %>

    <!-- Remove -->
    <form method="POST" action="/admin/ad/<%= ad.id %>/remove">
      <button
        type="submit"
        class="
          nookyup-hover
          px-4 py-2 rounded-lg text-sm font-medium
          text-red-300 border border-red-600/40
          bg-slate-900/40 backdrop-blur-xl
          transition-all duration-500
          hover:scale-[1.05]
          hover:border-red-500/80
          hover:text-red-200
          hover:shadow-[0_0_25px_rgba(239,68,68,0.4)]
        "
      >
        Remove
      </button>
    </form>

    <% if (ad.flag_reason || (ad.flags && ad.flags.length)) { %>
      <!-- Clear Flags -->
      <form method="POST" action="/admin/ad/<%= ad.id %>/clear-flags">
        <button
          type="submit"
          class="
            nookyup-hover
            px-4 py-2 rounded-lg text-sm font-medium
            text-slate-300 border border-slate-700/60
            bg-slate-900/40 backdrop-blur-xl
            transition-all duration-500
            hover:scale-[1.05]
            hover:border-pink-500/60
            hover:text-pink-200
            hover:shadow-[0_0_25px_rgba(236,72,153,0.4)]
          "
        >
          Clear flags
        </button>
      </form>
    <% } %>

  </div>

</div>

