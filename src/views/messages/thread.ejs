<% layout("../layouts/main") %>

<h1 class="text-3xl font-bold mb-8 text-pink-300 tracking-tight">
  Conversation
</h1>

<div class="space-y-6 mb-10">

  <% messages.forEach(m => { %>
    <div 
      class="
        nookyup-hover
        p-4 rounded-xl max-w-lg
        <%= m.sender_id === userId 
            ? 'ml-auto bg-pink-900/30 border border-pink-700/50' 
            : 'mr-auto bg-slate-900/40 border border-slate-800/60' 
        %>
        backdrop-blur-xl text-slate-200

        transition-all duration-500
        hover:scale-[1.02]
        hover:shadow-[0_0_25px_rgba(236,72,153,0.4)]
      "
    >
      <p class="text-sm text-slate-400 mb-1"><%= m.sender_name %></p>

      <p class="text-slate-200 leading-relaxed">
        <%= m.body %>
      </p>

      <p class="text-xs text-slate-500 mt-2">
        <%= new Date(m.created_at).toLocaleString() %>
      </p>
    </div>
  <% }) %>

</div>

<form method="POST" class="max-w-xl space-y-4">
  <input type="hidden" name="_csrf" value="<%= csrfToken %>">

  <textarea 
    name="body" 
    rows="3" 
    placeholder="Write a message..."
    class="
      w-full px-4 py-3 rounded-lg
      bg-slate-900/60 border border-slate-700 text-slate-200
      focus:border-pink-500 focus:ring-2 focus:ring-pink-500/40
      transition-all duration-300
    "
  ></textarea>

  <button 
    class="
      nookyup-hover
      px-6 py-3 rounded-lg text-lg font-medium
      text-pink-300 border border-pink-500/40
      bg-slate-900/40 backdrop-blur-xl
      transition-all duration-500
      hover:scale-[1.05]
      hover:border-pink-500/80
      hover:text-pink-200
      hover:shadow-[0_0_25px_rgba(236,72,153,0.5)]
    "
  >
    Send
  </button>
</form>

